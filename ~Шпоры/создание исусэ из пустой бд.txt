(ADDRESS = (PROTOCOL=TCP)(HOST=localhost)(PORT=1521))


Подготовка БД для работы

Создать профиль для пользователя из-под пользователя tiger:

  CREATE PROFILE "TIGER$PROXY"
    LIMIT 
         COMPOSITE_LIMIT DEFAULT 
         SESSIONS_PER_USER 20 
         CPU_PER_SESSION DEFAULT 
         CPU_PER_CALL 2400000 
         LOGICAL_READS_PER_SESSION DEFAULT 
         LOGICAL_READS_PER_CALL DEFAULT 
         IDLE_TIME DEFAULT 
         CONNECT_TIME 1440 
         PRIVATE_SGA DEFAULT 
         FAILED_LOGIN_ATTEMPTS DEFAULT 
         PASSWORD_LIFE_TIME DEFAULT 
         PASSWORD_REUSE_TIME DEFAULT 
         PASSWORD_REUSE_MAX DEFAULT 
         PASSWORD_VERIFY_FUNCTION DEFAULT 
         PASSWORD_LOCK_TIME DEFAULT 
         PASSWORD_GRACE_TIME DEFAULT 
         INACTIVE_ACCOUNT_TIME DEFAULT 
======================================================================
-- Object privileges granted to TIGER$PROXY_ROLE
GRANT SELECT ON TIGER.A_XABONENT_CONTACT_TYPE TO TIGER$PROXY_ROLE;
GRANT DELETE, INSERT, SELECT, UPDATE ON TIGER.TMP_OSZN TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_ABONENT TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_ACCOUNT_PER TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_ADDR_ADDRESS TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_CALC_VAR TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_C_NORM_TYPE TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_C_TARNAME TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_EMPL TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_EMPL_TERRA TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_P_CATEGORY_POINT TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_P_PLACETYPE TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_SOURCE_PAY TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_TYPE_ACCOUNT_PAYABLE TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_TYPE_REASON_LOCK TO TIGER$PROXY_ROLE;
GRANT SELECT ON TIGER.V_VERSION_SYSTEM TO TIGER$PROXY_ROLE;

-- System privileges granted to TIGER$PROXY_ROLE
GRANT EXECUTE ANY PROCEDURE TO TIGER$PROXY_ROLE;
GRANT EXECUTE ANY TYPE TO TIGER$PROXY_ROLE;

-- Roles granted to TIGER$PROXY_ROLE
GRANT CONNECT TO TIGER$PROXY_ROLE;
GRANT XX_XMLP_SCHEDULER TO TIGER$PROXY_ROLE;
GRANT XMLP_SCHEDULER TO TIGER$PROXY_ROLE;

-- Grantees of TIGER$PROXY_ROLE

GRANT TIGER$PROXY_ROLE TO TIGER WITH ADMIN OPTION;

======================================================================
Права пользователю tiger, выдать под system:

--- CREATE USER "TIGER"
      
create role TIGER$PROXY_ROLE;
create role TIGER_RW;
create role TIGER_RO;
create role XMLP_ADMIN;
create role XMLP_REPORTS_COMMON;
create role XMLP_REPORTS_OSO;
revoke TIGER$PROXY_ROLE from system;
revoke TIGER_RW from system;
revoke TIGER_RO from system;
revoke XMLP_ADMIN from system;
revoke XMLP_REPORTS_COMMON from system;
revoke XMLP_REPORTS_OSO from system;

  -- 11 Roles for TIGER 
  GRANT CONNECT TO TIGER WITH ADMIN OPTION;
  GRANT DBA TO TIGER;
  GRANT RESOURCE TO TIGER;
  GRANT SRT_TABLES_RO TO TIGER WITH ADMIN OPTION;
  GRANT TIGER$PROXY_ROLE TO TIGER WITH ADMIN OPTION;
  GRANT XMLP_ADMIN TO TIGER WITH ADMIN OPTION;
  GRANT XMLP_SCHEDULER TO TIGER WITH ADMIN OPTION;
  GRANT XX_XMLP_SCHEDULER TO TIGER WITH ADMIN OPTION;
  ALTER USER TIGER DEFAULT ROLE ALL;
  -- 137 System Privileges for TIGER 
  GRANT ADMINISTER ANY SQL TUNING SET TO TIGER;
  GRANT ADMINISTER DATABASE TRIGGER TO TIGER;
  GRANT ADMINISTER SQL TUNING SET TO TIGER;
  GRANT ADVISOR TO TIGER;
  GRANT ALTER ANY CLUSTER TO TIGER;
  GRANT ALTER ANY DIMENSION TO TIGER;
  GRANT ALTER ANY INDEX TO TIGER;
  GRANT ALTER ANY INDEXTYPE TO TIGER;
  GRANT ALTER ANY LIBRARY TO TIGER;
  GRANT ALTER ANY MATERIALIZED VIEW TO TIGER;
  GRANT ALTER ANY OUTLINE TO TIGER;
  GRANT ALTER ANY PROCEDURE TO TIGER;
  GRANT ALTER ANY ROLE TO TIGER;
  GRANT ALTER ANY SEQUENCE TO TIGER;
  GRANT ALTER ANY SQL PROFILE TO TIGER;
  GRANT ALTER ANY TABLE TO TIGER;
  GRANT ALTER ANY TRIGGER TO TIGER;
  GRANT ALTER ANY TYPE TO TIGER;
  GRANT ALTER DATABASE TO TIGER;
  GRANT ALTER PROFILE TO TIGER;
  GRANT ALTER RESOURCE COST TO TIGER;
  GRANT ALTER ROLLBACK SEGMENT TO TIGER;
  GRANT ALTER SESSION TO TIGER;
  GRANT ALTER SYSTEM TO TIGER;
  GRANT ALTER TABLESPACE TO TIGER;
  GRANT ALTER USER TO TIGER;
  GRANT ANALYZE ANY TO TIGER;
  GRANT AUDIT ANY TO TIGER;
  GRANT AUDIT SYSTEM TO TIGER;
  GRANT BACKUP ANY TABLE TO TIGER;
  GRANT BECOME USER TO TIGER;
  GRANT CHANGE NOTIFICATION TO TIGER;
  GRANT COMMENT ANY TABLE TO TIGER;
  GRANT CREATE ANY CLUSTER TO TIGER;
  GRANT CREATE ANY CONTEXT TO TIGER;
  GRANT CREATE ANY DIMENSION TO TIGER;
  GRANT CREATE ANY DIRECTORY TO TIGER;
  GRANT CREATE ANY INDEX TO TIGER;
  GRANT CREATE ANY INDEXTYPE TO TIGER;
  GRANT CREATE ANY JOB TO TIGER;
  GRANT CREATE ANY LIBRARY TO TIGER;
  GRANT CREATE ANY MATERIALIZED VIEW TO TIGER;
  GRANT CREATE ANY OPERATOR TO TIGER;
  GRANT CREATE ANY OUTLINE TO TIGER;
  GRANT CREATE ANY PROCEDURE TO TIGER;
  GRANT CREATE ANY SEQUENCE TO TIGER;
  GRANT CREATE ANY SQL PROFILE TO TIGER;
  GRANT CREATE ANY SYNONYM TO TIGER;
  GRANT CREATE ANY TABLE TO TIGER;
  GRANT CREATE ANY TRIGGER TO TIGER;
  GRANT CREATE ANY TYPE TO TIGER;
  GRANT CREATE ANY VIEW TO TIGER;
  GRANT CREATE CLUSTER TO TIGER;
  GRANT CREATE DATABASE LINK TO TIGER;
  GRANT CREATE DIMENSION TO TIGER;
  GRANT CREATE EXTERNAL JOB TO TIGER;
  GRANT CREATE INDEXTYPE TO TIGER;
  GRANT CREATE JOB TO TIGER;
  GRANT CREATE LIBRARY TO TIGER;
  GRANT CREATE MATERIALIZED VIEW TO TIGER;
  GRANT CREATE OPERATOR TO TIGER;
  GRANT CREATE PROCEDURE TO TIGER;
  GRANT CREATE PROFILE TO TIGER;
  GRANT CREATE PUBLIC DATABASE LINK TO TIGER;
  GRANT CREATE PUBLIC SYNONYM TO TIGER;
  GRANT CREATE ROLE TO TIGER;
  GRANT CREATE ROLLBACK SEGMENT TO TIGER;
  GRANT CREATE SEQUENCE TO TIGER;
  GRANT CREATE SESSION TO TIGER;
  GRANT CREATE SYNONYM TO TIGER;
  GRANT CREATE TABLE TO TIGER;
  GRANT CREATE TABLESPACE TO TIGER;
  GRANT CREATE TRIGGER TO TIGER;
  GRANT CREATE TYPE TO TIGER;
  GRANT CREATE USER TO TIGER;
  GRANT CREATE VIEW TO TIGER;
  GRANT DEBUG ANY PROCEDURE TO TIGER;
  GRANT DEBUG CONNECT SESSION TO TIGER;
  GRANT DELETE ANY TABLE TO TIGER;
  GRANT DROP ANY CLUSTER TO TIGER;
  GRANT DROP ANY CONTEXT TO TIGER;
  GRANT DROP ANY DIMENSION TO TIGER;
  GRANT DROP ANY DIRECTORY TO TIGER;
  GRANT DROP ANY INDEX TO TIGER;
  GRANT DROP ANY INDEXTYPE TO TIGER;
  GRANT DROP ANY LIBRARY TO TIGER;
  GRANT DROP ANY MATERIALIZED VIEW TO TIGER;
  GRANT DROP ANY OPERATOR TO TIGER;
  GRANT DROP ANY OUTLINE TO TIGER;
  GRANT DROP ANY PROCEDURE TO TIGER;
  GRANT DROP ANY ROLE TO TIGER;
  GRANT DROP ANY SEQUENCE TO TIGER;
  GRANT DROP ANY SQL PROFILE TO TIGER;
  GRANT DROP ANY SYNONYM TO TIGER;
  GRANT DROP ANY TABLE TO TIGER;
  GRANT DROP ANY TRIGGER TO TIGER;
  GRANT DROP ANY TYPE TO TIGER;
  GRANT DROP ANY VIEW TO TIGER;
  GRANT DROP PROFILE TO TIGER;
  GRANT DROP PUBLIC DATABASE LINK TO TIGER;
  GRANT DROP PUBLIC SYNONYM TO TIGER;
  GRANT DROP ROLLBACK SEGMENT TO TIGER;
  GRANT DROP TABLESPACE TO TIGER;
  GRANT DROP USER TO TIGER;
  GRANT EXECUTE ANY CLASS TO TIGER;
  GRANT EXECUTE ANY INDEXTYPE TO TIGER;
  GRANT EXECUTE ANY LIBRARY TO TIGER;
  GRANT EXECUTE ANY OPERATOR TO TIGER;
  GRANT EXECUTE ANY PROCEDURE TO TIGER;
  GRANT EXECUTE ANY PROGRAM TO TIGER;
  GRANT EXECUTE ANY TYPE TO TIGER;
  GRANT EXPORT FULL DATABASE TO TIGER;
  GRANT FLASHBACK ANY TABLE TO TIGER;
  GRANT FORCE ANY TRANSACTION TO TIGER;
  GRANT FORCE TRANSACTION TO TIGER;
  GRANT GLOBAL QUERY REWRITE TO TIGER;
  GRANT GRANT ANY OBJECT PRIVILEGE TO TIGER;
  GRANT GRANT ANY PRIVILEGE TO TIGER;
  GRANT GRANT ANY ROLE TO TIGER;
  GRANT IMPORT FULL DATABASE TO TIGER;
  GRANT INSERT ANY TABLE TO TIGER;
  GRANT LOCK ANY TABLE TO TIGER;
  GRANT MANAGE SCHEDULER TO TIGER;
  GRANT MANAGE TABLESPACE TO TIGER;
  GRANT MERGE ANY VIEW TO TIGER;
  GRANT ON COMMIT REFRESH TO TIGER;
  GRANT QUERY REWRITE TO TIGER;
  GRANT RESTRICTED SESSION TO TIGER;
  GRANT RESUMABLE TO TIGER;
  GRANT SELECT ANY SEQUENCE TO TIGER;
  GRANT SELECT ANY TABLE TO TIGER;
  GRANT SELECT ANY TRANSACTION TO TIGER;
  GRANT UNDER ANY TABLE TO TIGER;
  GRANT UNDER ANY TYPE TO TIGER;
  GRANT UNDER ANY VIEW TO TIGER;
  GRANT UNLIMITED TABLESPACE TO TIGER;
  GRANT UPDATE ANY TABLE TO TIGER;
  -- 2 Tablespace Quotas for TIGER 
  ALTER USER TIGER QUOTA UNLIMITED ON TIGER;
  ALTER USER TIGER QUOTA UNLIMITED ON USERS;
  -- 42 Object Privileges for TIGER 
    GRANT EXECUTE ON CS.SIGMA_COURT_SERVICE TO TIGER;
    GRANT EXECUTE ON CS.SRB_DEAL_REPORT_SERVICE TO TIGER;
    GRANT SELECT ON CS.V_SRB_CALC_BU TO TIGER;
    GRANT SELECT ON CS.V_SRB_DEAL_ALL TO TIGER;
    GRANT SELECT ON CS.V_SRB_DEAL_ISPLISTS TO TIGER;
    GRANT SELECT ON CS.V_SRB_DEAL_OTV TO TIGER;
    GRANT SELECT ON CS.V_SRB_DEAL_OTV_GROUPS TO TIGER;
    GRANT SELECT ON CS.V_SRB_DEAL_RASC TO TIGER;
    GRANT SELECT ON CS.V_SRB_DEAL_SCHETA TO TIGER;
    GRANT SELECT ON CS.V_SRB_RASC_ABON_DISP TO TIGER;
    GRANT SELECT ON CS.V_SRB_RASC_ABON_PRIVS TO TIGER;
    GRANT SELECT ON CS.V_SRB_RASC_PERIODS TO TIGER;
    GRANT REFERENCES, SELECT ON DEV.MV_ACTION_SUMMARY TO TIGER;
    GRANT SELECT ON DEV.TMP_METER TO TIGER;
    GRANT SELECT ON ENHOL.ABONS TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_ABON_PAY TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_ABON_PHONE TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_ABON_POK TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_ABON_PRIVS TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_ABON_SALDO TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_ABON_TARIF TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_ABON_TU TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_ADDR TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_CART_RASHET TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_METER TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_METERTYPE TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_OTGRUZKA TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_PLACETYPE TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_POK_TYPE TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_PRIV_DOC TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_PRIV_PLC TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_ROOM_TYPE TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.PES_TAR_PLC TO TIGER;
    GRANT DELETE, INSERT, SELECT, UPDATE ON ENHOL.SRT_EH_ADR TO TIGER;
    GRANT SELECT ON REPORTS.DW_ABONENT TO TIGER;
    GRANT EXECUTE, READ, WRITE ON DIRECTORY BACKUP_DIR TO TIGER WITH GRANT OPTION;
    GRANT EXECUTE, READ, WRITE ON DIRECTORY BACKUP_DIR_AUX TO TIGER WITH GRANT OPTION;
    GRANT EXECUTE ON SYS.DBMS_LOCK TO TIGER;
    GRANT EXECUTE ON SYS.DBMS_PIPE TO TIGER;
    GRANT READ, WRITE ON DIRECTORY EXTDIR TO TIGER;
    GRANT EXECUTE, READ, WRITE ON DIRECTORY TOAD_TRACEFILE_DIR_1 TO TIGER WITH GRANT OPTION;
    GRANT EXECUTE, READ, WRITE ON DIRECTORY TOAD_TRACEFILE_DIR_2 TO TIGER WITH GRANT OPTION;

grant SELECT on DBA_SQL_PLAN_BASELINES to TIGER;
grant SELECT on V_$INSTANCE to TIGER;
grant SELECT on V_$SESSION to TIGER;
grant SELECT on V_$PROCESS to TIGER;
grant EXECUTE on DBMS_PIPE to TIGER;
grant EXECUTE on DBMS_LOCK to TIGER;




  -- 1 Resoure Group Privilege for TIGER 






BEGIN
  SYS.DBMS_RESOURCE_MANAGER.clear_pending_area();
  SYS.DBMS_RESOURCE_MANAGER.create_pending_area();
  SYS.DBMS_RESOURCE_MANAGER_PRIVS.GRANT_SWITCH_CONSUMER_GROUP
    ('TIGER','BATCH',FALSE);
  SYS.DBMS_RESOURCE_MANAGER.submit_pending_area();
END;
/

======================================================================
su - oracle -c "sqlplus system/sigma00@sigma"

begin sys.dbms_resource_manager.clear_pending_area; end;   
/
begin
  sys.dbms_resource_manager.clear_pending_area();
  sys.dbms_resource_manager.create_pending_area();
  sys.dbms_resource_manager.create_consumer_group (
      consumer_group               => 'BATCH'
     ,comment                      => 'batch jobs');
  sys.dbms_resource_manager.submit_pending_area();
end;
/
BEGIN
  DBMS_RESOURCE_MANAGER.clear_pending_area();
  DBMS_RESOURCE_MANAGER.create_pending_area();
  DBMS_RESOURCE_MANAGER_PRIVS.GRANT_SWITCH_CONSUMER_GROUP('TIGER','BATCH',FALSE);
  DBMS_RESOURCE_MANAGER.submit_pending_area();
END;
/

======================================================================
su - oracle -c "sqlplus tiger/securepass"
grant execute on JUDICIAL_WORK to cs;
@/usr/local/bin/oracle/reinstall_oracle_users.sql


======================================================================

su - oracle -c "sqlplus / as sysdba"  <<EOF >> $log.tmp 2>&1
grant execute on dbms_lock to $target_schema;
grant execute on dbms_pipe to $target_schema;
update TIGER.rglobal set rglobal_string='32',rglobal_number=32 where rglobal_id=71;
execute utl_recomp.recomp_parallel(4);
commit;
======================================================================

тест:  
sqlplus tiger/securepass
conn tiger$admuser17/admuser17



curl -H "Content-Type: application/json" -X POST -d '{"accountNumber":"009\\00403310"}' http://isuapp.fast.pesc.ru/ikus-rest-service/ikus/account/address





begin
 execute immediate 'drop context '||user||'$context';
end;
/
begin
 execute immediate 'create context '||user||'$context using admission';
end;
/

begin
 useradm.reinstall_oracle_users(false);
end;
/

begin
 for d in (select d.OBJECT_OWNER, d.OBJECT_NAME, d.POLICY_NAME from dba_policies d where OBJECT_OWNER=user) loop
 DBMS_RLS.DROP_POLICY(d.OBJECT_OWNER,d.OBJECT_NAME,d.POLICY_NAME);
 end loop;
end;
/

begin
DBMS_RLS.ADD_POLICY(user,'A_PERSON',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT, DELETE',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'A_ACODE',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT, DELETE',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'ADMS_XUSER',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT, DELETE',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'ORG_UNIT',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT, DELETE',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'STAFF',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT, DELETE',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'PACK_PAY_SERIES',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT, DELETE',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'C_TERRA',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT, DELETE',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'A_XPOINTABON',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT, DELETE',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'PAY_ABON',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'PACK_PAY',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'A_XABONENT',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'A_VPOINTABON',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'A_VABONENT',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'RGLOBAL',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
DBMS_RLS.ADD_POLICY(user,'NET_ELEMENT',user||'$ORG_UNIT',user,'ADMISSION.POLICY_FUNCTION','SELECT',POLICY_TYPE => dbms_rls.CONTEXT_SENSITIVE);
end;
/


создание синонимов для publisher

-- На источнике и приемнике
select * from dba_synonyms sy where sy.owner = 'PUBLIC' and sy.table_owner like 'TIGER%';
-- Сравнить.

-- Если синонимы есть, но смотрят в ошибочную схему:
select 'drop public synonym '||sy.synonym_name||';' line from dba_synonyms sy
  where sy.owner = 'PUBLIC' and sy.table_owner like 'TIGER%' and sy.table_owner != 'TIGER';

-- Если синонимов не хватает, то выборка берется с пром стенда с соотв юзером
select 'create or replace public synonym '||sy.synonym_name||' for TIGER.'||sy.table_name||';' l
  from dba_synonyms sy where sy.owner = 'PUBLIC' and sy.table_owner like 'TIGER%';



